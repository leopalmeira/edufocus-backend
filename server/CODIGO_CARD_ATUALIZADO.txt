            // GERAR E ENVIAR CARD VISUAL COM FOTO DO ALUNO
            if (student.photo_url && student.photo_url.startsWith('data:image')) {
                try {
                    console.log(`üé® Gerando card visual para ${student.name}...`);
                    
                    // Gerar card HTML como imagem
                    const cardImage = await generateArrivalCard({
                        studentName: student.name,
                        studentPhoto: student.photo_url,
                        className: student.class_name,
                        schoolName: schoolName,
                        date: date,
                        time: time
                    });
                    
                    console.log(`üì∏ Enviando card visual para WhatsApp...`);
                    
                    // Enviar card como imagem
                    await this.sock.sendMessage(phoneNumber, {
                        image: cardImage,
                        caption: `‚úÖ ${student.name} chegou com seguran√ßa!\nüéì ${schoolName}`
                    });
                    
                    console.log(`‚úÖ Card visual enviado para ${student.name} (${student.phone}) - Escola ${this.schoolId}`);
                    
                } catch (cardError) {
                    console.log(`‚ö†Ô∏è Erro ao gerar card, enviando mensagem simples:`, cardError.message);
                    // Se falhar ao gerar card, envia mensagem de texto
                    await this.sock.sendMessage(phoneNumber, { text: message });
                    console.log(`‚úÖ Mensagem simples enviada para ${student.name}`);
                }
            } else {
                // Aluno n√£o tem foto - enviar s√≥ mensagem de texto
                await this.sock.sendMessage(phoneNumber, { text: message });
                console.log(`‚úÖ Notifica√ß√£o enviada para ${student.name} (${student.phone}) - Escola ${this.schoolId}`);
            }
